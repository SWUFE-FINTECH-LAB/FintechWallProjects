# Wind 市场墙板 – 产品需求文档

## 1. 执行摘要
提供一个 1 分钟、多场景的可视化墙板，使观看者能够一目了然地掌握全球市场状况。该产品面向需要被动、持续刷新的态势感知的交易大厅、教室和简报室。支持两种数据版本：
- **Wind 版**: 依赖 WindPy/WAPI 获取机构级数据。
- **开放版**: 仅使用非商业、开放/免费的 API，以支持没有 Wind 访问权限的环境。

两种变体共享相同的用户体验、布局和行为，仅在数据源和集成凭据方面有所不同。该技术栈使用 Python 后端进行数据聚合，并使用在信息亭模式下运行的基于标准的 HTML/CSS/JavaScript 前端。

## 2. 目标与非目标
### 2.1 目标
- 在 60 秒的被动观看时间内，提供可操作、视觉丰富的市场情报。
- 支持五个场景 (A–E) 的自动轮播，具有可配置的停留时间和会话感知加权。
- 为全球市场的股票、商品、外汇、利率、加密货币和宏观新闻提供可靠的数据覆盖。
- 在 Wind 和开放版中提供一致的体验，只需最少的操作员干预。
- 在 55–65 英寸 4K 显示器上可靠运行，具有自动启动、重新连接和离线缓存功能。

### 2.2 非目标
- 详细分析、图表深入分析或用户驱动的交互（产品仅为“后仰式”显示）。
- 投资组合管理、交易执行或警报工作流。
- 超出信息亭显示的移动或桌面交互式客户端。

## 3. 用户画像与用例
| 用户画像 | 需求 | 解决的痛点 |
| --- | --- | --- |
| 交易台负责人 | 快速的早间简报，跨资产意识 | 减少手动切换选项卡和总结 |
| 经济学讲师 | 用于宏观/利率讨论的可视化教学辅助工具 | 提供精选、可靠的数据源 |
| 运营经理 | 在轮班期间监控市场状况 | 一目了然地显示全球状况和风险警报 |

### 主要用例
1. **开盘简报**: 在亚洲开盘前，演示者参考墙板以确认隔夜走势、外汇水平和宏观事件。
2. **午间监控**: 交易台使用场景 B 热图和场景 C 利率来调整日内风险状况。
3. **晚间加密货币观察**: 夜班团队依靠场景 D 指标来了解资金费率和未平仓合约的变化。

## 4. 用户场景与流程
1. **自动启动**: 显示器启动，信息亭浏览器启动墙板 URL，自动进行身份验证（如果需要）并开始场景轮播。
2. **被动观看**: 观众观看循环播放的场景；跑马灯和英雄卡片强调关键变化；过时数据会自动标记。
3. **会话切换**: 在新加坡时间 20:00，轮播会在没有手动输入的情况下重新优先考虑以美国为中心的视图。
4. **源故障转移**: 如果 Wind 无法访问，系统将切换到备用数据；观看者会看到时间戳和微妙的“过时”指示器，直到恢复。

## 5. 功能需求
### 5.1 轮播与调度
- 必须在场景 A–E 之间循环播放，具有可配置的停留时间（每个场景默认为 20–45 秒，总循环 <= 60 秒）。
- 必须支持基于会话的加权（亚洲、欧洲、美国、隔夜），通过配置文件更改停留时间比率。
- 必须公开手动覆盖 API（受保护），以便操作员在需要时可以固定某个场景。

### 5.2 场景需求
- **场景 A – 全球概览**: 显示所需的指数、商品、外汇对、利率、加密货币快照和交易所状态指示器。
- **场景 B – 股票热图**: 显示区域热图、带有流动性过滤器的热门股票列表、隐含波动率面板（VIX、VXN、1M/3M 曲线）。
- **场景 C – 宏观与利率**: 呈现收益率曲线与周环比比较、联邦基金概率、SOFR/SORA 图块以及带有倒计时的经济日历。
- **场景 D – 加密货币深度**: 提供现货指标、年化波动率、资金费率、聚合未平仓合约、稳定币流向和链上活动指标。
- **场景 E – 新闻横幅（可选）**: 显示滚动标题或事件倒计时；突出显示风险标志（例如，VIX 高于阈值、2s10s 倒挂）。

### 5.3 数据新鲜度与指示器
- 每个数据卡必须显示上次更新的时间戳（相对）和源版本元数据。
- 系统必须区分新鲜内容和过时内容（例如，在 SLA 违规后，微妙地变暗或显示“上次更新”标签）。

### 5.4 可访问性与视觉需求
- 使用蓝色/橙色调色板和 ▲▼ 符号以实现色盲可访问性。
- 英雄数字的最小尺寸保持在 60–80 像素；确保 WCAG AA 对比度。
- 在可配置的时间后提供自动深色模式。

### 5.5 设备与部署
- 必须在 4K 分辨率的 Chromium 信息亭（Linux 或 Windows）中运行。
- 必须在网络故障时自动重新连接，并从上一个场景状态恢复轮播。
- 必须在本地缓存最后一个有效负载，以便在短暂中断期间显示，并带有时间戳标签。

## 6. 数据需求
- **版本**: 配置必须允许在部署时选择 Wind 或开放数据模式。
- **覆盖范围**: 每个场景列出强制性指标；在主要指标不可用时定义备用指标。
- **延迟**: 高频源（外汇/加密货币）的目标延迟 <10 秒，宏观/日历更新的目标延迟 <5 分钟。
- **质量**: 验证传入数据的异常值；确保一致的单位和货币标签。

## 7. 成功指标
- 交易时间内轮播正常运行时间 ≥ 99%。
- 数据新鲜度 SLA 达到目标：≥ 95% 的外汇/加密货币更新在 15 秒内完成，≥ 95% 的利率更新在 5 分钟内完成。
- 用户满意度（定性）：利益相关者在试点调查中报告简报效率提高。
- 启动后数据源问题的最小手动干预（每周 <2 次）。

## 8. 推出计划
1. **试点**: 将 Wind 版部署到内部交易台，并进行手动监控。
2. **反馈循环**: 收集定性反馈，调整视觉效果和调度配置文件。
3. **开放版发布**: 为没有 Wind 访问权限的合作伙伴推出无 Wind 的变体。
4. **全面上市**: 提供部署指南、信息亭脚本和管理员培训。

## 9. 依赖项
- Wind 版依赖于 Wind 终端凭据和与 Wind 服务器的网络连接。
- 开放版依赖于公共 API 的可用性（在适用的情况下，速率限制、密钥管理）。
- 需要能够输出 4K 并具有稳定网络连接的信息亭硬件。

## 10. 风险与缓解措施
| 风险 | 影响 | 缓解措施 |
| --- | --- | --- |
| Wind 许可证限制 | 法律/合同问题 | 在部署前与合规部门确认再分发条款 |
| 开放 API 速率限制/中断 | 数据新鲜度下降 | 实施缓存、备用提供程序和警报 |
| 大型显示器上的视觉过载 | 可读性降低 | 强制执行布局网格、排版标准和有限的杂乱 |
| 会话逻辑配置错误 | 错误的场景重点 | 提供经过测试的默认值和管理工具以验证计划 |
| 加密货币 WebSocket 断开连接 | 缺少资金/OI 数据 | 实施重试/退避并回退到最后已知值 |

## 11. 验收标准
- 轮播连续运行 72 小时，无需手动重置。
- 在 Wind 和开放版之间切换仅需要更改配置并重新启动。
- 场景显示所有强制性指标，并带有正确的标签和刷新频率。
- 信息亭部署在设备启动时自动启动，并在 30 秒内从网络中断中恢复。
- 交付的文档：开发指南、PRD、技术架构、部署清单。

## 12. 附录
- 场景内容表（请参阅开发指南）。
- 每个提供程序的 API 归属要求和 SLA 说明。
- 术语表：OI（未平仓合约）、SLA（服务水平协议）、SORA/SOFR、2s10s 倒挂。